"use strict";var gameEngine={ele:null,allBullet:{},allEnemyplane:{},totalScore:0,init:function(){return gameEngine.ele=document.getElementById("main"),this},start:function(){gameEngine.loading(function(){var e=document.getElementById("main");console.log(e);var n=document.createElement("div");n.id="scro",console.log(n),n.innerHTML=0,e.appendChild(n),myPlane.init().move(),myPlane.onfire(),gameEngine.listeningKeybord(),gameEngine.crateEnemyplane(),gameEngine.isCrashed(),gameEngine.bgmove()})},loading:function(e){var n=document.createElement("div");n.className="logo",gameEngine.ele.appendChild(n);var l=document.createElement("div");l.className="load",gameEngine.ele.appendChild(l);var a=0,t=setInterval(function(){a<6?l.style.background="url(img/images/loading"+(a++%3+1)+".png) no-repeat":(clearInterval(t),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(l),e())},500)},listeningKeybord:function(){var e=0,n=0;window.onkeydown=function(l){37==(l=l||event).keyCode&&(e=-5),38==l.keyCode&&(n=-5),39==l.keyCode&&(e=5),40==l.keyCode&&(n=5)},window.onkeyup=function(){e=0,n=0},setInterval(function(){var l=myPlane.ele.offsetLeft+e,a=myPlane.ele.offsetTop+n;l<0?l=0:l>gameEngine.ele.offsetWidth-myPlane.ele.offsetWidth&&(l=gameEngine.ele.offsetWidth-myPlane.ele.offsetWidth),a<0?a=0:a>gameEngine.ele.offsetHeight-myPlane.ele.offsetHeight&&(a=gameEngine.ele.offsetHeight-myPlane.ele.offsetHeight),myPlane.ele.style.left=l+"px",myPlane.ele.style.top=a+"px"},30)},crateEnemyplane:function(){setInterval(function(){Math.random()>.3&&new EnemyPlane(EnemyPlane.prototype.Enemy_type_small).init().move()},1e3),setInterval(function(){Math.random()>.4&&new EnemyPlane(EnemyPlane.prototype.Enemy_type_middle).init().move()},3e3),setInterval(function(){Math.random()>.5&&new EnemyPlane(EnemyPlane.prototype.Enemy_type_large).init().move()},7e3)},isCrashed:function(){var e=!1;setInterval(function(){for(var n in gameEngine.allEnemyplane){for(var l in gameEngine.allBullet)isCrash(gameEngine.allBullet[l].ele,gameEngine.allEnemyplane[n].ele)&&(gameEngine.allBullet[l].boom(),delete gameEngine.allBullet[l],gameEngine.allEnemyplane[n].hurt());if(!e&&isCrash(gameEngine.allEnemyplane[n].ele,myPlane.ele)){myPlane.boom(),e=!0;var a=prompt("您的总分数是:"+gameEngine.totalScore+", 请输入您的大名");a?ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:a,score:gameEngine.totalScore},async:!0,success:function(e){console.log(e);var e=JSON.parse(e);console.log(e.msg),location.href="html/ranking.html"},error:function(){console.log("error")}}):location.reload()}}},30)},bgmove:function(){var e=0;setInterval(function(){gameEngine.ele.style.backgroundPositionY=e+++"px"},30)}};